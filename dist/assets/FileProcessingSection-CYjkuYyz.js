import{r as t,j as e,I as j,B as y,L as b}from"./index-CjafWCjW.js";import{u as N,D as v,E as w}from"./useTranscription-lq7WLSPY.js";import{t as S}from"./transcription-BuDXvoUS.js";const I=({className:u=""})=>{const{state:m,dispatch:o}=N(),[r,p]=t.useState(m.language),[c,d]=t.useState(!1),[i,l]=t.useState(null),[n,g]=t.useState(),x=t.useRef(null),f=async()=>{l(null),g(void 0);const s=x.current?.files?.[0];if(!s){l("Please select an audio file to upload.");return}d(!0);try{const a=await S(s,r);g({transcript:a.transcript,translation:a.translation}),o({type:"set_language",payload:r}),o({type:"add_session",payload:{id:a.sessionId,language:r,createdAt:Date.now(),transcript:a.transcript,translation:a.translation}})}catch(a){const h=a instanceof Error?a.message:"Failed to process file";l(h)}finally{d(!1)}};return e.jsxs("section",{className:`bg-gray-800 rounded-xl p-4 sm:p-6 ${u}`,"aria-label":"File processing",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"File Processing"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(j,{name:"upload",size:20,"aria-hidden":!0}),e.jsx("input",{ref:x,type:"file",accept:"audio/*",className:"text-gray-300","aria-label":"Select audio file for transcription"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("label",{htmlFor:"language-select",className:"text-gray-300",children:"Language"}),e.jsx("select",{id:"language-select",value:r,onChange:s=>p(s.target.value),className:"bg-gray-900 text-gray-200 border border-gray-700 rounded-lg px-3 py-2","aria-label":"Select transcription language",children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx(y,{variant:"outline",onClick:f,className:"border-gray-600 text-gray-300 hover:text-white hover:border-gray-500",children:"Process File"})]}),c&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(b,{size:"md",text:"Uploading and transcribing..."})}),i&&e.jsx(w,{message:i,onDismiss:()=>l(null)}),!c&&!i&&n?.transcript&&e.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 text-gray-300 leading-relaxed",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Transcript"}),e.jsx("p",{children:n.transcript}),n.translation&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:"Translation"}),e.jsx("p",{children:n.translation})]})]})]})]})};export{I as default};
